<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Experiment Widget SDK - Production Example</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      line-height: 1.6;
      background: #f8fafc;
    }

    .hero {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 60px 40px;
      border-radius: 16px;
      margin-bottom: 40px;
    }

    .hero h1 {
      margin: 0 0 16px 0;
      font-size: 48px;
    }

    .hero p {
      margin: 0;
      font-size: 20px;
      opacity: 0.9;
    }

    .content {
      background: white;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }

    .content h2 {
      color: #1a202c;
      margin-bottom: 16px;
    }

    .content p {
      color: #4a5568;
      margin-bottom: 16px;
    }

    .note {
      background: #fef5e7;
      border-left: 4px solid #f59e0b;
      padding: 16px 20px;
      margin: 24px 0;
      border-radius: 4px;
    }

    .note strong {
      color: #d97706;
      display: block;
      margin-bottom: 8px;
    }

    .code {
      background: #f7fafc;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 16px;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 13px;
      overflow-x: auto;
      margin: 16px 0;
    }

    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 40px 0;
    }

    .feature {
      background: #f8fafc;
      padding: 24px;
      border-radius: 12px;
      border: 1px solid #e2e8f0;
    }

    .feature h3 {
      color: #667eea;
      margin: 0 0 12px 0;
      font-size: 18px;
    }

    .feature p {
      color: #64748b;
      margin: 0;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="hero">
    <h1>ğŸš€ Experiment Widget SDK Demo</h1>
    <p>è½»é‡çº§å®éªŒæ’ä»¶ - ä»…éœ€ä¸€è¡Œä»£ç å³å¯æ¥å…¥</p>
  </div>

  <div class="content">
    <h2>âœ¨ ä¸»è¦ç‰¹æ€§</h2>

    <div class="features">
      <div class="feature">
        <h3>é›¶é…ç½®æ¥å…¥</h3>
        <p>ä»…éœ€ä¸€è¡Œ script æ ‡ç­¾ï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç </p>
      </div>
      <div class="feature">
        <h3>è¶…è½»é‡çº§</h3>
        <p>å‹ç¼©åä»… 3.38 KBï¼Œå‡ ä¹æ— æ€§èƒ½å½±å“</p>
      </div>
      <div class="feature">
        <h3>æ ·å¼éš”ç¦»</h3>
        <p>ä½¿ç”¨ Shadow DOMï¼Œå®Œå…¨ä¸ä¼šæ±¡æŸ“é¡µé¢æ ·å¼</p>
      </div>
      <div class="feature">
        <h3>è‡ªåŠ¨åŸ‹ç‚¹</h3>
        <p>æ™ºèƒ½è¿½è¸ªæ›å…‰å’Œç‚¹å‡»ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–ç </p>
      </div>
    </div>

    <h2>ğŸ“¦ ä½¿ç”¨æ–¹æ³•</h2>
    <p>åœ¨ä»»ä½•ç½‘é¡µä¸­æ·»åŠ ä»¥ä¸‹ä»£ç å³å¯ï¼š</p>

    <div class="code">&lt;script
  src="./dist/experiment-widget.js"
  data-api-base="http://localhost:4000/api/v1"
  data-experiment-id="exp_123"
  data-user-key=""
  async&gt;
&lt;/script&gt;</div>

    <div class="note">
      <strong>ğŸ’¡ æç¤º</strong>
      <p>æœ¬ç¤ºä¾‹ä½¿ç”¨æ„å»ºåçš„æ–‡ä»¶ï¼ˆdist/experiment-widget.jsï¼‰ã€‚è¯·ç¡®ä¿å·²è¿è¡Œ <code>npm run build</code>ã€‚</p>
      <p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¯·å°†æ–‡ä»¶æ‰˜ç®¡åˆ° CDN å¹¶æ›¿æ¢ src åœ°å€ã€‚</p>
    </div>

    <h2>ğŸ¯ å®ç°åŸç†</h2>

    <h3>ä¸ä¼ ç»Ÿæ–¹æ¡ˆçš„å¯¹æ¯”</h3>

    <p><strong>ä¼ ç»Ÿä¾µå…¥å¼æ–¹æ¡ˆï¼š</strong></p>
    <div class="code">// éœ€è¦åœ¨ä»£ç ä¸­å¯¼å…¥
import ExperimentWidget from './ExperimentWidget';

function App() {
  return &lt;ExperimentWidget /&gt;; // ä¾µå…¥ä»£ç ç»“æ„
}</div>

    <p><strong>æ–°æ–¹æ¡ˆï¼ˆç‹¬ç«‹éƒ¨ç½²ï¼‰ï¼š</strong></p>
    <div class="code">&lt;!-- ä»…éœ€ä¸€è¡Œï¼Œæ— éœ€ä¿®æ”¹ä»£ç  --&gt;
&lt;script src="cdn.../experiment-widget.js" data-api-base="..." data-experiment-id="..." async&gt;&lt;/script&gt;</div>

    <h3>æ ¸å¿ƒæŠ€æœ¯</h3>
    <ul>
      <li><strong>IIFE æ ¼å¼</strong>ï¼šè‡ªæ‰§è¡Œå‡½æ•°ï¼Œæ— éœ€ import</li>
      <li><strong>Shadow DOM</strong>ï¼šæ ·å¼å®Œå…¨éš”ç¦»ï¼Œä¸å½±å“å®¿ä¸»é¡µé¢</li>
      <li><strong>IntersectionObserver</strong>ï¼šé«˜æ€§èƒ½æ›å…‰ç›‘æµ‹</li>
      <li><strong>sendBeacon</strong>ï¼šå¯é çš„æ•°æ®ä¸ŠæŠ¥</li>
      <li><strong>localStorage</strong>ï¼šåŒ¿åç”¨æˆ· ID æŒä¹…åŒ–</li>
    </ul>

    <h2>ğŸ”§ API æ¥å£</h2>
    <p>åç«¯éœ€è¦æä¾›ä»¥ä¸‹æ¥å£ï¼š</p>

    <p><strong>1. è·å–å®éªŒå†…å®¹</strong></p>
    <div class="code">GET /experiments/{experiment_id}/assign?user_key={user_key}</div>

    <p><strong>2. ä¸ŠæŠ¥æ›å…‰</strong></p>
    <div class="code">POST /experiments/{experiment_id}/hit</div>

    <p><strong>3. ä¸ŠæŠ¥ç‚¹å‡»</strong></p>
    <div class="code">POST /experiments/{experiment_id}/click</div>

    <h2>ğŸ“Š æ•°æ®ç»“æ„</h2>
    <p>å‚è€ƒ <code>docs/code_example.tsx</code> ä¸­çš„ AssignData ç±»å‹ï¼š</p>
    <div class="code">{
  "creative_id": "c1",
  "title": "äº§å“æ ‡é¢˜",
  "product_name": "äº§å“åç§°",
  "cta_text": "äº†è§£æ›´å¤š",
  "image_url": "https://...",
  "selling_points": ["å–ç‚¹1", "å–ç‚¹2"]
}</div>

    <h2>ğŸ¨ UI æ•ˆæœ</h2>
    <p>Widget ä¼šåœ¨é¡µé¢å³ä¸‹è§’å±•ç¤ºï¼š</p>
    <ul>
      <li>æ”¶èµ·æ€ï¼šåœ†å½¢ badgeï¼ˆ48pxï¼‰</li>
      <li>å±•å¼€æ€ï¼šå¡ç‰‡é¢æ¿ï¼ˆ320px å®½ï¼‰</li>
      <li>ç‚¹å‡» badge å±•å¼€ï¼Œç‚¹å‡» Hide æ”¶èµ·</li>
      <li>ç‚¹å‡»å¡ç‰‡ä¼šè§¦å‘ç‚¹å‡»ä¸ŠæŠ¥</li>
    </ul>

    <div class="note">
      <strong>ğŸ‘€ æ³¨æ„</strong>
      <p>è¯·æŸ¥çœ‹é¡µé¢å³ä¸‹è§’çš„æµ®çª—ï¼Œç‚¹å‡»å³å¯å±•å¼€æŸ¥çœ‹å®éªŒå†…å®¹ã€‚</p>
      <p>å¦‚æœæœªæ˜¾ç¤ºï¼Œè¯·æ£€æŸ¥åç«¯ API æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</p>
    </div>
  </div>

  <!-- Widget Script - ä½¿ç”¨æ„å»ºåçš„æ–‡ä»¶ -->
  <script
    src="./dist/experiment-widget.js"
    data-api-base="http://localhost:4000/api/v1"
    data-experiment-id="exp_123"
    data-user-key=""
    async>
  </script>
</body>
</html>
